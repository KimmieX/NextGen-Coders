<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /chantmo-supa/

    # Redirect to HTTPS if not localhost
    # RewriteCond %{HTTPS} off
    # RewriteCond %{HTTP_HOST} !^localhost
    # RewriteRule ^(.*)$ https://%{HTTP_HOST}/chantmo-supa/$1 [L,R=301]

    # Remove trailing slash
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)/$ /chantmo-supa/$1 [L,R=301]

    # Front controller for pretty URLs
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?url=$1 [L,QSA]
    
    # Handle admin routes
    RewriteRule ^admin/(.*)$ admin/$1 [L]
</IfModule>

# Prevent directory listing
Options -Indexes

# Error documents
ErrorDocument 404 /chantmo-supa/404.php
ErrorDocument 403 /chantmo-supa/403.php